# Chapter 09. 단위 테스트

## TDD 법칙 세 가지

- 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다.
- 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다.
- 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다.

## 깨끗한 테스트 코드 유지하기

- 테스트는 유연성, 유지보수성, 재사용성을 제공한다.

## 깨끗한 테스트 코드

- 가독성이 좋아야 한다.

### Build-Operate-Check 패턴

- 테스트 자료를 만들고, 테스트 자료를 조작하고, 조작한 결과가 올바른지 확인한다.

### 도메인에 특화된 테스트 언어

반복적으로 사용하는 복잡한 API 호출이 있다면, 그 호출을 단순화하고 재사용성을 높일 목적으로 함수와 유틸리티를 만들어 사용한다.

### 이중 표준

실제 환경에서는 사용하지 않는 기능을 테스트 환경에서는 사용할 수 있다.

## 테스트 당 assert 하나

테스트를 분리하면 중복되는 코드가 많아진다.

### Template Method 패턴

given-when-then 관례를 이용했고, then 부분만 상이한 상황이라면 given/ when 부분을 부모 클래스에 두고 then 부분을 자식 클래스에 두면 된다.

아니면 @Before 함수에 given/ when 부분을 넣고 @Test 함수에 then 부분을 넣어 테스트를 분리할 수 있다.

### 테스트 당 개념 하나

테스트 함수마다 한 개념만 테스트하라.

독자적인 여러 개의 개념을 테스트하기 보다는 각 테스트 함수가 하나의 개념에만 집중하도록 만들어야 한다.

## F.I.R.S.T

- Fast: 테스트는 빨라야 한다.
- Independent: 각 테스트는 서로 의존하면 안 된다.
- Repeatable: 테스트는 어떤 환경에서도 반복 가능해야 한다.
- Self-Validating: 테스트는 bool 값으로 결과를 내야 한다.
- Timely: 테스트는 적시에 작성해야 한다.

## 결론

테스트 API를 만들어 도메인 특화 언어를 통하여 테스트 코드를 깔끔하게 만들어야 한다.







