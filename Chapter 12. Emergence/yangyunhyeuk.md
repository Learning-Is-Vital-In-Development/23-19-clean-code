## 12장 창발성

---

### 창발적 설계로 깔끔한 코드를 구현하자

- 켄트 벡의 규칙
    1. 모든 테스트를 실행한다. 
    2. 중복을 없앤다. 
    3. 프로그래머 의도를 표현한다. 
    4. 클래스와 메서드 수를 최소로 줄인다. 

---

### 단순한 설계 규칙1 : 모든 테스트를 실행하라

- 검증이 불가능한 시스템은 절대 출시하면 안된다.
- 테스트가 가능한 시스템을 만들려고 애쓰면 설계 품질이 더불어 높아진다.
- SRP를 준수하는 클래스는 테스트가 훨씬 쉽다.
- 결합도가 높으면 테스트케이스를 작성하기 어려우며, 테스트 케이스를 많이 작성할 수록 개발자는 DIP와 같은 원칙을 도입하고 DI, 인터페이스, 추상화 등과 같은 도구를 사용해 결합도를 낮춘다.

### 단순한 설계 규칙2~4 : 리팩토링

- 리팩토링 단계에서는 다음의 기법을 사용하곤 한다.
    - 응집도를 높힌다.
    - 결합도를 낮춘다.
    - 관심사를 분리한다.
    - 시스템 관심사를 모듈로 나눈다.
    - 함수와 클래스의 크기를 줄인다.
    - 더 나은 이름을 선택한다.
    - 동시에 리팩토링 단계는 중복을 제거하고 프로그래머의 의도를 표현하고 클래스와 메서드 수를 최소로 줄이는 단계이기도 하다.

### 중복을 없애라

- 우수한 설계에서 중복은 가장 큰 적이다.
- 중복은 추가 작업, 추가 위험, 불필요한 복잡도를 뜻하기 때문이다.
- 깔끔한 시스템을 만들려면 단 몇 줄이라도 중복을 제거해야 하겠단 의지가 필요하다.
- 템플릿 메서드 패턴은 고차원 중복을 제거할 목적으로 사용되곤 한다.
    - 템플릿 메서드 패턴 : 어떤 작업을 처리하는 일부분을 서브클래스로 캡슐화하여 전체 일을 수행하는 구조는 바꾸지 않으면서 특정 단계에서 수행하는 내역을 바꾸는 패턴

### 표현하라

- 시스템이 점차 복잡해지면서 유지보수 개발자가 시스템을 이해하느라 보내는 시간은 점점 늘어나고 동시에 코드를 오해할 가능성도 점점 커진다. 그래서 코드는 개발자의 의도를 분명히 표현해야 한다.
- 좋은 이름을 선택하라
    - 이름과 기능이 완전 딴판인 클래스나 함수로 유지보수 담당자를 놀라게 해선 안된다.
- 함수와 클래스 크기를 가능한 줄인다.
    - 작은 클래스와 작은 함수는 이름 짓기도 쉽고, 구현하기도 쉽고, 이해하기도 쉽다.
- 표준 명칭을 사용한다.
    - 디자인 패턴은 의사소통과 표현력 강화가 주 목적으로, 클래스가 command, visitor 패턴을 사용하면 클래스 이름에 패턴 이름을 넣어준다.
- 단위 테스트 케이스를 꼼꼼히 작성한다.
    - 테스트 케이스는 소위 “예제로 보여주는 문서”로, 잘 만든 테스트 케이스를 보면 클래스 기능이 한 눈에 들어온다.
- 결론
    - 자신의 작품을 좀 더 자랑하자
    - 함수와 클래스에 조금 더 시간을 투자하자
    - 더 나은 이름을 선택하고, 큰 함수를 작은 함수 여럿으로 나누고 자신의 작품에 좀 더 주의를 기울이자

### 클래스와 메서드 수를 최소한 줄이자

- 가능한 독단적인 견해는 멀리하고 실용적인 방식을 택하자
- 클래스와 함수 수를 줄이는 작업도 중요하나, 테스트 케이스를 만들고 중복을 제거하고 의도를 표현하는 작업이 더 중요하다는 의미이다.
